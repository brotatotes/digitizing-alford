from spellchecker import SpellChecker
from gensim.utils import tokenize
from bs4 import BeautifulSoup

def remove_html_tags(input_string):
    soup = BeautifulSoup(input_string, "html.parser")
    return soup.get_text()

def identify_misspelled_words(input_string):
    spell = SpellChecker()

    text = remove_html_tags(input_string)

    words = tokenize(text)

    misspelled = spell.unknown(words)

    return misspelled


if __name__ == '__main__':

    text = '<b>Hey! something is hapenning here!'
    html_text = open('consolidation/output/4_alford-chap-inserted.html').read()
    html_text_small = """
whatever causes contributed to bring about all this, might be all summed up in the fulfilment of the divine purpose, of which that prophecy was the declaration. The accomplishment of a promise formally made is often alleged as the cause of an action extending wider than the promise, and purposed long before its utterance. And of course these remarks apply to every passage where the phrase is used. Such a construction can have but one meaning. If such meaning involve us in difficulty regarding the prophecy itself, far better leave such difficulty, in so doubtful a matter as the interpretation of prophecy, unsolved, than create one in so simple a matter as the rendering of a phrase whose meaning no indifferent person could doubt. The immediate and literal fulfilment of the prophecy seems to be related in Isa. viii. 1–4. Yet there the child was<i> not</i> called Emmanuel: but in ver. 8 that name is used as applying to one of far greater dignity. Again, Isa. ix. 6 seems to be a reference to this prophecy, as also Micah v. 3.<br><br><b> 23. the virgin</b>] the words are from the Septuagint. Such is the rendering of the LXX. The Hebrew word is the more general term, “<i>the young woman</i>,” and is so translated by Aquila.<br><br><b> they shall call</b>] This indefinite plural is surely not without meaning here.<b> Men shall call</b>—i. e. it shall be a name by which He shall be called—one of his appellations. The change of person seems to shew, both that the prophecy had a literal fulfilment at the time, and that it is here quoted in a form suited to its greater and final fulfilment. The<br><br> Hebrew has, ‘<i>thou shalt call</i>’ (fem.).<br><br><b> Emmanuel</b>] i.e.<b> God (is) with us</b>. In Isaiah, prophetic primarily of deliverance from the then impending war; but also of final and glorious deliverance by the manifestation of God in the flesh.<br><br><b> 25.</b>] With regard to the much-controverted sense of this verse we may observe, (1) That the primâ facie impression on the reader certainly is, that<b> knew her not</b> was confined to the period of time here mentioned. (2) That there is nothing in Scripture tending to remove this impression, either (a) by narration,—and the very use of the term, “<i>brethren of the Lord</i>” (on which see note at ch. xiii. 55), without qualification, shews that the idea was not repulsive: or (b) by implication,—for every where in the N.T. marriage is spoken of in high and honourable terms; and the words of the angel to Joseph rather imply, than discountenance, such a supposition. (3) On the other hand, the words of this verse do not<i> require</i> it: the idiom being justified on the contrary hypothesis. See my Greek Test. On the whole it seems to me, that<i> no one would ever have thought of interpreting the verse any otherwise than in its primâ</i><i> facie meaning, except to force it into accordance with a preconceived notion of the perpetual virginity of Mary</i>. It is characteristic, and historically instructive, that the great impugner of the view given above should be Jerome, the impugner of marriage itself: and that his opponents in its interpretation should have been branded as heretics by after ages. See a brief notice of the controversy in Milman, Hist. of Latin Christianity, i. 72 ff.<br><br><b> he called</b>] i.e. Joseph; see ver. 21.<br><br><h2 class="new-page" id="Matthew 2"><i>Matthew: Chapter 2</i></h2><b> CHAP. II. 1–12.</b>] VISIT AND ADORATION OF MAGI FROM THE EAST.<br><br><b> 1. Bethlehem of Judæa</b>] There was another Bethlehem in the tribe of Zebulun,<a href="https://docs.google.com/document/d/1tr-xlyhLQlFvr7ROWNE5_wNUf0_fRSPo/edit?usp=drivesdk&ouid=102686065507783622876&rtpof=true&sd=true
" target="_blank"> (DOCX LINK Volume 1, Part 1, Page 73)</a> near the sea of Galilee, Josh. xix. 15. The name Bethlehem-Judah is used, Judges xvii. 7, 8, 9: 1 Sam. xvii. 12. Another name for our Bethlehem was Ephrath; Gen. xxxv. 19; xlviii. 7; or Ephrata, Micah v. 2. It was six Roman miles to the south of Jerusalem, and was known as ‘the city of David,’ the origin of his family, Ruth i. 1, 19.<br><br><b> in the days of Herod</b>] HEROD THE GREAT, son of Antipater, an Idumæan, by an Arabian mother, made king of Judæa on occasion of his having fled to Rome, being driven from his tetrarchy by the pretender Antigonus. This title was confirmed to him after the battle of Actium by Octavianus. He sought to strengthen his throne by a series of cruelties and slaughters, putting to death even his wife Mariamne, and his sons Alexander and Aristobulus. His cruelties, and his affectation of Gentile customs, gained for him a hatred among the Jews, which neither his magnificent rebuilding of the temple, nor his liberality in other public works, nor his provident care of the people during a severe famine, could mitigate. He died miserably, five days after he had put to death his son Antipater, in the seventieth year of his age, the thirty-eighth of his reign, and the 750th year of Rome. The events here related took place a short time before his death, but necessarily more than forty days; for he spent the last forty days of his life at Jericho and the baths of Callirrhoe, and therefore would not be found by the magi at Jerusalem. The history of Herod’s reign is contained in Josephus, Antt. books xiv.—xvii.<br><br> It would be useless to detail all the conjectures to which this history has given rise. From what has been written on the subject it would appear, (1) That<b> the East</b> may mean either<i> Arabia, Persia,</i><i> Chald</i> æ<i> a, or Parthia, with the provinces adjacent</i>. See Judges vi. 3: Isa. xli. 2; xlvi. 11: Num. xxiii. 7. Philo speaks of “the Eastern nations and their leaders the Parthians.” In all these countries there were<b> magi</b>, at least persons who in the wider sense of the word were now known by the name. The words in ver. 2 seem to point to some land not very near Judæa, as also the result of Herod’s enquiry as to the date, shewn in “two years old.” (2) If we place together (<i>a</i>) the prophecy in Num. xxiv. 17, which could hardly be unknown to the Eastern astrologers,—and (<i>b</i>) the assertion of Suetonius “that there prevailed an ancient and consistent opinion in all the East, that it was fated that at that time those should go forth from Judæa who should rule the empire:”—and of Tacitus, to the same effect and nearly in the same words,—and (<i>c</i>) the prophecy, also likely to be known in the East, of the seventy weeks in Daniel ix. 24;—we can, I think, be at no loss to understand how any remarkable celestial appearance at this time should have been interpreted as it was. (3) There is no ground for supposing the magi to have been<i> three</i> in number (as first, apparently, by Leo the Great, A.D. 450); or to have been<i> kings</i>. The<i> first</i> tradition appears to have arisen from the number of their gifts: the<i> second</i>, from the prophecy in Isa. lx. 3. Tertullian seems to deduce it from the similar prophecy in Ps. lxxii. 10, for, he says, the Magi were most"""

    misspelled_words = identify_misspelled_words(html_text)

    output_file = 'consolidation/output/misspelled_words.txt'
    with open(output_file, 'w') as f:
        for word in sorted(list(misspelled_words)):
            f.write(word + '\n')
    